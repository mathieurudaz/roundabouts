<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <title>d3 webGL force graph with PIXI.js</title>
        <meta name="description" content="">
        <meta name="theme-color" content="#000000">
    </head>
    <body>
        <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default"></script>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.3.2/pixi.min.js"></script>
        <script>

        let width = 960, height = 600;
        let stage = new PIXI.Container();
        let renderer = PIXI.autoDetectRenderer(width, height,
            {antialias: !0, transparent: !0, resolution: 1});

        document.body.appendChild(renderer.view);

        let simulation = d3.forceSimulation()
            .force('charge', d3.forceManyBody())
            .force('center', d3.forceCenter(width / 2, height / 2));
          
        d3.json("miserables.json", function(error, graph) {
            graph.nodes.forEach((node) => {
                node.gfx = new PIXI.Graphics();
                node.gfx.beginFill(0xff00ff);
                node.gfx.drawCircle(0, 0, 5);
                stage.addChild(node.gfx);
            });

            simulation
                .nodes(graph.nodes)
                .on('tick', ticked);

          function ticked() {
              graph.nodes.forEach((node) => {
                  node.gfx.position = new PIXI.Point(node.x, node.y);
              });
              renderer.render(stage);
          }
        });

        </script>
    </body>
</html>